// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  super
  admin
  user
  client
}

model User {
  id            String    @id @default(uuid())
  name          String
  password      String
  role          Role      @default(admin)
  isActive      Boolean   @default(true)
  email         String    @unique
  emailVerified DateTime?
  image         String?
  Company       Company[]

  @@index([role])
}

model Company {
  id             String        @id @default(uuid())
  companyName    String
  ruc            String
  //relaciones
  IndustryTipe   IndustryType  @relation(fields: [industryTypeId], references: [id])
  industryTypeId Int
  User           User          @relation(fields: [userId], references: [id])
  userId         String
  CompanyUser    CompanyUser[]

  @@index([ruc])
}

model IndustryType {
  id      Int       @id @default(autoincrement())
  name    String
  //relaciones
  Company Company[]
}

model CompanyUser {
  id        String  @id @default(uuid())
  username  String
  password  String
  role      Role    @default(user)
  isActive  Boolean @default(true)
  image     String?
  //relaciones
  Company   Company @relation(fields: [companyId], references: [id])
  companyId String

  @@index([role])
}
